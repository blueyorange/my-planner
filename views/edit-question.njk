{% set title="questions" %}
{% extends "base.njk" %}
{% block content %}
    {% include "header.njk" %}
    <div class="container mt-3">
        <div class="row">
            <div class="col">
                <h2>Edit</h2>
                <form action="{{ q.id }}" method="post">
                    <div class="mb-3">
                        <textarea name="body" class="form-control" id="questionTextarea" rows="10" placeholder="Question markdown">{{ q.body }}</textarea>
                    </div>
                    {% for option in q.options %}
                        <div class="input-group mb-3">
                            <input name="option-{{ loop.index }}" type="text" class="form-control" aria-label="Text input with checkbox" value="{{ option }}"/>
                            <div class="input-group-text" value="">
                                {% if q.correct.includes(option) %}
                                    <input class="form-check-input mt-0" type="radio" value="{{ option }}" name="correct" aria-label="Checkbox for following text input" checked/>
                                {% else %}
                                    <input class="form-check-input mt-0" type="radio" value="{{ option }}" name="correct" aria-label="Checkbox for following text input"/>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                    <button type="submit" class="btn btn-primary">Save</button>
                </form>
            </div>
            <div class="col">
                <h2>Preview</h2>
                <div id="question-preview"></div>
            </div>
        </div>
    </div>
    <script
        defer
        src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.js"
        integrity="sha384-Qsn9KnoKISj6dI8g7p1HBlNpVx0I8p1SvlwOldgi3IorMle61nQy4zEahWYtljaz"
        crossorigin="anonymous"></script>
    <script
        defer
        src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/auto-render.min.js"
        integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
        crossorigin="anonymous"
        onload=""></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="/previewQuestion.js" type="module"></script>
{% endblock %}